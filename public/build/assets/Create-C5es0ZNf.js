import{r as m,T as B,q as T,c as s,o as n,i as j,u as d,Z as D,h as V,a as t,j as w,t as f,b as E,w as a,F as i,d as b,f as h,v}from"./app-D5U-eT0B.js";import{_ as $}from"./AuthenticatedLayout-pEhUGDD_.js";import"./ApplicationLogo-DWddR4E2.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"py-12"},O={class:"max-w-7xl mx-auto sm:px-6 lg:px-12"},R={class:"p-6 bg-white rounded-lg shadow"},Y={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",role:"alert"},I={class:"block sm:inline"},Q=["value"],Z=["value"],z=["value"],G=["onUpdate:modelValue"],H=["onClick"],J=["onUpdate:modelValue"],K=["onUpdate:modelValue"],P=["onUpdate:modelValue"],W=["onClick"],le={__name:"Create",props:{years:Array,subjects:Array,modules:Array},setup(S){const _=S;m(null);const g=m(null),c=m([]),x=m([]),y=m(null),l=B({year_id:null,subject_id:null,module_id:null,name:"",datax:[{content:""}],activity:[{title:"",question:"",difficulty:"",correct_answer:""}]}),U=()=>{l.datax?l.datax.push({content:""}):console.error("newLesson.datax is not an array")},A=r=>{l.datax.length>1&&l.datax.splice(r,1)},q=()=>{l.activity.push({title:"",question:"",difficulty:"",correct_answer:""})},L=r=>{l.activity.length>1&&l.activity.splice(r,1)},M=()=>{l.post(route("lessons.store"),{onSuccess:()=>{l.reset(),y.value="Lesson created successfully!",setTimeout(()=>{y.value=null},3e3)}})},k=()=>{l.year_id?axios.get(route("subjects.get",{yearId:l.year_id})).then(r=>{x.value=r.data,g.value=null,c.value=[],l.module_id=null}).catch(r=>{console.error("Error fetching subjects:",r),x.value=[]}):(x.value=[],g.value=null,c.value=[],l.module_id=null)},C=async()=>{if(l.subject_id)try{const r=await axios.get(route("modules.get",{subject_id:l.subject_id}));c.value=r.data}catch(r){console.error("Error fetching modules:",r)}else c.value=[]};T(()=>{_.subjects.length>0&&(g.value=_.subjects[0].id,k(),C())});const N=()=>{window.history.back()};return(r,e)=>(n(),s(i,null,[j(d(D),{title:"Dashboard"}),j($,null,{header:V(()=>e[4]||(e[4]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Lessons",-1)])),default:V(()=>[t("div",F,[t("div",O,[t("div",R,[e[16]||(e[16]=t("h2",{class:"text-xl font-semibold mb-4"},"Create a New Lesson",-1)),y.value?(n(),s("div",Y,[e[5]||(e[5]=t("strong",{class:"font-bold"},"Success!",-1)),t("span",I,f(y.value),1)])):w("",!0),t("form",{onSubmit:E(M,["prevent"]),class:"mb-6"},[e[10]||(e[10]=t("h1",{class:"text-xl font-semibold"},"Select Year:",-1)),a(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>d(l).year_id=o),onChange:k,class:"border p-2 rounded w-full mb-2"},[e[6]||(e[6]=t("option",{value:null},"Select a Year",-1)),(n(!0),s(i,null,b(S.years,o=>(n(),s("option",{key:o.id,value:o.id},f(o.name),9,Q))),128))],544),[[h,d(l).year_id]]),e[11]||(e[11]=t("h1",{class:"text-xl font-semibold"},"Select Subject:",-1)),a(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>d(l).subject_id=o),onChange:C,class:"border p-2 rounded w-full mb-2"},[e[7]||(e[7]=t("option",{value:null},"Select a Subject",-1)),(n(!0),s(i,null,b(x.value,o=>(n(),s("option",{key:o.id,value:o.id},f(o.name),9,Z))),128))],544),[[h,d(l).subject_id]]),e[12]||(e[12]=t("h1",{class:"text-xl font-semibold"},"Select Module:",-1)),a(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>d(l).module_id=o),id:"module",class:"border p-2 rounded w-full mb-2"},[e[8]||(e[8]=t("option",{value:null},"Select a Module",-1)),(n(!0),s(i,null,b(c.value,o=>(n(),s("option",{key:o.id,value:o.id},f(o.name),9,z))),128))],512),[[h,d(l).module_id]]),e[13]||(e[13]=t("h1",{class:"text-xl font-semibold"},"Name:",-1)),a(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>d(l).name=o),placeholder:"Lesson Name",class:"border p-2 rounded w-full mb-2",required:""},null,512),[[v,d(l).name]]),e[14]||(e[14]=t("h1",{class:"text-xl font-semibold"},"Contents:",-1)),(n(!0),s(i,null,b(d(l).datax,(o,p)=>(n(),s("div",{key:p,class:"mb-2 p-2 border rounded"},[a(t("textarea",{"onUpdate:modelValue":u=>o.content=u,placeholder:"Content",class:"border p-2 rounded w-full mb-1",required:""},null,8,G),[[v,o.content]]),d(l).datax.length>1?(n(),s("button",{key:0,type:"button",onClick:u=>A(p),class:"bg-red-500 text-white px-3 py-1 rounded"}," Remove ",8,H)):w("",!0)]))),128)),t("button",{type:"button",onClick:U,class:"bg-gray-500 text-white px-4 py-2 rounded mb-2"}," + Add Content Section "),e[15]||(e[15]=t("h1",{class:"text-xl font-semibold"},"Activities:",-1)),(n(!0),s(i,null,b(d(l).activity,(o,p)=>(n(),s("div",{key:p,class:"mb-2 p-2 border rounded"},[a(t("input",{"onUpdate:modelValue":u=>o.title=u,placeholder:"Activity Title",class:"border p-2 rounded w-full mb-1",required:""},null,8,J),[[v,o.title]]),a(t("textarea",{"onUpdate:modelValue":u=>o.question=u,placeholder:"Question",class:"border p-2 rounded w-full mb-1",required:""},null,8,K),[[v,o.question]]),a(t("input",{"onUpdate:modelValue":u=>o.correct_answer=u,placeholder:"Correct Answer",class:"border p-2 rounded w-full mb-1",required:""},null,8,P),[[v,o.correct_answer]]),d(l).activity.length>1?(n(),s("button",{key:0,type:"button",onClick:u=>L(p),class:"bg-red-500 text-white px-3 py-1 rounded"}," Remove ",8,W)):w("",!0)]))),128)),t("button",{type:"button",onClick:q,class:"bg-gray-500 text-white px-4 py-2 rounded mb-2"}," + Add Activity Section "),t("div",{class:"flex items-center gap-6 mt-6"},[e[9]||(e[9]=t("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded"}," Save Lesson ",-1)),t("button",{type:"button",onClick:N,class:"bg-gray-500 text-white px-4 py-2 rounded"}," ‚Üê Back ")])],32)])])])]),_:1})],64))}};export{le as default};
