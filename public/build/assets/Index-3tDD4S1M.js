import{r as b,x as U,N as h,q as $,T as z,c as l,o as a,i as S,u as E,Z as O,h as A,a as e,w as _,v as P,F as y,d as g,t as o,f as N,e as m}from"./app-D5U-eT0B.js";import{_ as q}from"./AuthenticatedLayout-pEhUGDD_.js";import"./ApplicationLogo-DWddR4E2.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"py-12"},Q={class:"max-w-7xl mx-auto sm:px-6 lg:px-12"},F={class:"p-6 bg-white rounded-lg shadow"},Y={class:"mb-4 flex gap-4"},I=["value"],R=["value"],Z=["href"],G={class:"w-full border-collapse border border-gray-300"},H={class:"border border-gray-300 px-4 py-2"},J={class:"border border-gray-300 px-4 py-2"},K={class:"border border-gray-300 px-4 py-2"},W={class:"border border-gray-300 px-4 py-2"},X={class:"border border-gray-300 px-4 py-2"},ee={class:"border border-gray-300 px-4 py-2"},se={class:"border border-gray-300 px-4 py-2"},te=["href"],re=["onClick"],oe=["onClick"],le={class:"mt-4 flex justify-between"},ae=["disabled"],ne={class:"px-4 py-2"},de=["disabled"],ye={__name:"Index",props:{lessons:Object,filters:Object,years:Array,subjects:Array,modules:Array},setup(d){const u=d,v=b(u.filters.search||""),f=b(u.filters.year_id||""),i=b(u.filters.subject_id||""),c=b(u.filters.module_id||""),x=b([]),p=b([]);b(u.lessons.current_page);const w=r=>{if(r>=1&&r<=u.lessons.last_page){const s=new URL(window.location.href);s.searchParams.set("page",r),h.get(s.toString())}},M=async()=>{if(f.value)try{const r=await axios.get(route("subjects.get",{yearId:f.value}));x.value=r.data,i.value="",c.value="",p.value=[]}catch(r){console.error("Error fetching subjects:",r),x.value=[]}else x.value=[],i.value="",c.value="",p.value=[]},j=async()=>{if(i.value)try{const r=await axios.get(route("modules.get",{subject_id:i.value}));p.value=r.data,c.value=""}catch(r){console.error("Error fetching modules:",r)}else p.value=[],c.value=""};U([v,f,i,c],()=>{h.get(route("lessons.index"),{search:v.value,year_id:f.value,subject_id:i.value,module_id:c.value},{preserveState:!0,replace:!0})}),$(()=>{u.filters.year_id&&M(),u.filters.subject_id&&j()});const L=r=>{h.get(route("lessons.edit",r))},V=z({}),D=r=>{confirm("Are you sure you want to delete this lesson?")&&V.delete(route("lessons.destroy",r),{onSuccess:()=>{location.reload()}})};return(r,s)=>(a(),l(y,null,[S(E(O),{title:"Dashboard"}),S(q,null,{header:A(()=>s[5]||(s[5]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Lessons",-1)])),default:A(()=>[e("div",B,[e("div",Q,[e("div",F,[e("div",Y,[_(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>v.value=t),type:"text",placeholder:"Search lessons...",class:"border rounded"},null,512),[[P,v.value]]),_(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>i.value=t),onChange:j,class:"border p-2 rounded"},[s[6]||(s[6]=e("option",{value:""},"All Subjects",-1)),(a(!0),l(y,null,g(x.value,t=>(a(),l("option",{key:t.id,value:t.id},o(t.name),9,I))),128))],544),[[N,i.value]]),_(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>c.value=t),class:"border p-2 rounded"},[s[7]||(s[7]=e("option",{value:""},"All Modules",-1)),(a(!0),l(y,null,g(p.value,t=>(a(),l("option",{key:t.id,value:t.id},o(t.name),9,R))),128))],512),[[N,c.value]]),e("a",{href:r.route("lessons.create"),class:"bg-blue-500 text-white px-4 py-4 rounded inline-block"},"Create New Lesson",8,Z)]),e("table",G,[s[12]||(s[12]=e("thead",null,[e("tr",{class:"bg-gray-200"},[e("th",{class:"border border-gray-300 px-4 py-2"},"Year"),e("th",{class:"border border-gray-300 px-4 py-2"},"Subject"),e("th",{class:"border border-gray-300 px-4 py-2"},"Module"),e("th",{class:"border border-gray-300 px-4 py-2"},"Name"),e("th",{class:"border border-gray-300 px-4 py-2"},"Content"),e("th",{class:"border border-gray-300 px-4 py-2"},"Activity"),e("th",{class:"border border-gray-300 px-4 py-2"},"Actions")])],-1)),e("tbody",null,[(a(!0),l(y,null,g(d.lessons.data,t=>{var k,C;return a(),l("tr",{key:t.id},[e("td",H,o(t.year.name),1),e("td",J,o((k=t.subject)==null?void 0:k.name),1),e("td",K,o((C=t.module)==null?void 0:C.name),1),e("td",W,o(t.name),1),e("td",X,[e("ul",null,[(a(!0),l(y,null,g(t.data,(n,T)=>(a(),l("li",{key:n.content},o(T+1+". "+n.content),1))),128))])]),e("td",ee,[e("ul",null,[(a(!0),l(y,null,g(t.activity,n=>(a(),l("li",{key:n.activity},[e("ul",null,[e("li",null,[s[8]||(s[8]=e("strong",null,"Title:",-1)),m(" "+o(n.title),1)]),e("li",null,[s[9]||(s[9]=e("strong",null,"Question:",-1)),m(" "+o(n.question),1)]),e("li",null,[s[10]||(s[10]=e("strong",null,"Difficulty:",-1)),m(" "+o(n.difficulty),1)]),e("li",null,[s[11]||(s[11]=e("strong",null,"Correct Answer:",-1)),m(" "+o(n.correct_answer),1)])])]))),128))])]),e("td",se,[e("a",{href:r.route("lesson-quizzes.index",t.id),class:"text-green-500 ml-4"},"Quizzes",8,te),e("button",{onClick:n=>L(t.id),class:"text-yellow-500 ml-4"},"Edit",8,re),e("button",{onClick:n=>D(t.id),class:"text-red-500 ml-4"},"Delete",8,oe)])])}),128))])]),e("div",le,[e("button",{onClick:s[3]||(s[3]=t=>w(d.lessons.current_page-1)),disabled:d.lessons.current_page===1,class:"px-4 py-2 bg-gray-300 rounded"}," Previous ",8,ae),e("span",ne,"Page "+o(d.lessons.current_page)+" of "+o(d.lessons.last_page),1),e("button",{onClick:s[4]||(s[4]=t=>w(d.lessons.current_page+1)),disabled:d.lessons.current_page===d.lessons.last_page,class:"px-4 py-2 bg-gray-300 rounded"}," Next ",8,de)])])])])]),_:1})],64))}};export{ye as default};
