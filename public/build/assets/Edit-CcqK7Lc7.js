import{r as p,T as B,q as T,k as D,c as d,o as u,i as C,u as r,Z as O,h as V,a as t,j as w,t as g,b as $,w as i,F as m,d as v,f as _,v as f,s as j}from"./app-D5U-eT0B.js";import{_ as F}from"./AuthenticatedLayout-pEhUGDD_.js";import"./ApplicationLogo-DWddR4E2.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"py-12"},Y={class:"max-w-7xl mx-auto sm:px-6 lg:px-12"},I={class:"p-6 bg-white rounded-lg shadow"},Q={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",role:"alert"},Z={class:"block sm:inline"},z=["value"],G=["value"],H=["value"],J=["onUpdate:modelValue"],K=["onClick"],P=["onUpdate:modelValue"],W=["onUpdate:modelValue"],X=["onUpdate:modelValue"],ee=["onUpdate:modelValue"],te=["onClick"],de={__name:"Edit",props:{years:Array,subjects:Array,modules:Array,lesson:Object},setup(h){const s=h;p(s.lesson?s.lesson.year_id:null);const k=p(s.lesson?s.lesson.subject_id:null);p(s.lesson?s.lesson.module_id:null);const c=p([]),x=p([]),y=p(null),l=B({year_id:s.lesson?s.lesson.year_id:null,subject_id:s.lesson?s.lesson.subject_id:null,module_id:s.lesson?s.lesson.module_id:null,name:s.lesson?s.lesson.name:"",datax:s.lesson?s.lesson.data:[{content:""}],activity:s.lesson?s.lesson.activity:[{title:"",question:"",difficulty:"",correct_answer:""}]}),U=()=>{l.datax.push({content:""})},A=n=>{l.datax.length>1&&l.datax.splice(n,1)},q=()=>{l.activity.push({title:"",question:"",difficulty:"",correct_answer:""})},M=n=>{l.activity.length>1&&l.activity.splice(n,1)},L=()=>{l.put(route("lessons.update",s.lesson.id),{onSuccess:()=>{y.value="Lesson updated successfully!",setTimeout(()=>{y.value=null},3e3)}})},S=()=>{l.year_id?j.get(route("subjects.get",{yearId:l.year_id})).then(n=>{x.value=n.data,k.value=null,c.value=[],l.module_id=null}).catch(n=>{console.error("Error fetching subjects:",n),x.value=[]}):(x.value=[],k.value=null,c.value=[],l.module_id=null)},N=()=>{console.log(l),l.subject_id?j.get(route("modules.get",{subject_id:l.subject_id})).then(n=>{c.value=n.data}).catch(n=>{console.error("Error fetching modules:",n),c.value=[]}):c.value=[]},E=()=>{window.history.back()};return T(()=>{S()}),D(()=>{const n=c.value.find(e=>e.id===l.module_id);return n?n.name:"No module selected"}),(n,e)=>(u(),d(m,null,[C(r(O),{title:"Dashboard"}),C(F,null,{header:V(()=>e[4]||(e[4]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Lessons",-1)])),default:V(()=>[t("div",R,[t("div",Y,[t("div",I,[e[17]||(e[17]=t("h2",{class:"text-xl font-semibold mb-4"},"Edit Lesson",-1)),y.value?(u(),d("div",Q,[e[5]||(e[5]=t("strong",{class:"font-bold"},"Success!",-1)),t("span",Z,g(y.value),1)])):w("",!0),t("form",{onSubmit:$(L,["prevent"]),class:"mb-6"},[e[11]||(e[11]=t("h1",{class:"text-xl font-semibold"},"Select Year:",-1)),i(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>r(l).year_id=o),onChange:S,class:"border p-2 rounded w-full mb-2"},[e[6]||(e[6]=t("option",{value:null},"Select a Year",-1)),(u(!0),d(m,null,v(h.years,o=>(u(),d("option",{key:o.id,value:o.id},g(o.name),9,z))),128))],544),[[_,r(l).year_id]]),e[12]||(e[12]=t("h1",{class:"text-xl font-semibold"},"Select Subject:",-1)),i(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>r(l).subject_id=o),onChange:N,class:"border p-2 rounded w-full mb-2"},[e[7]||(e[7]=t("option",{value:null},"Select a Subject",-1)),(u(!0),d(m,null,v(x.value,o=>(u(),d("option",{key:o.id,value:o.id},g(o.name),9,G))),128))],544),[[_,r(l).subject_id]]),e[13]||(e[13]=t("h1",{class:"text-xl font-semibold"},"Select Module:",-1)),i(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>r(l).module_id=o),id:"module",class:"border p-2 rounded w-full mb-2"},[e[8]||(e[8]=t("option",{value:null},"Select a Module",-1)),(u(!0),d(m,null,v(c.value,o=>(u(),d("option",{key:o.id,value:o.id},g(o.name),9,H))),128))],512),[[_,r(l).module_id]]),e[14]||(e[14]=t("h1",{class:"text-xl font-semibold"},"Name:",-1)),i(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>r(l).name=o),placeholder:"Lesson Name",class:"border p-2 rounded w-full mb-2",required:""},null,512),[[f,r(l).name]]),e[15]||(e[15]=t("h1",{class:"text-xl font-semibold"},"Contents:",-1)),(u(!0),d(m,null,v(r(l).datax,(o,b)=>(u(),d("div",{key:b,class:"mb-2 p-2 border rounded"},[i(t("textarea",{"onUpdate:modelValue":a=>o.content=a,placeholder:"Content",class:"border p-2 rounded w-full mb-1",required:""},null,8,J),[[f,o.content]]),r(l).datax.length>1?(u(),d("button",{key:0,type:"button",onClick:a=>A(b),class:"bg-red-500 text-white px-3 py-1 rounded"}," Remove ",8,K)):w("",!0)]))),128)),t("button",{type:"button",onClick:U,class:"bg-gray-500 text-white px-4 py-2 rounded mb-2"}," + Add Content Section "),e[16]||(e[16]=t("h1",{class:"text-xl font-semibold"},"Activities:",-1)),(u(!0),d(m,null,v(r(l).activity,(o,b)=>(u(),d("div",{key:b,class:"mb-2 p-2 border rounded"},[i(t("input",{"onUpdate:modelValue":a=>o.title=a,placeholder:"Activity Title",class:"border p-2 rounded w-full mb-1",required:""},null,8,P),[[f,o.title]]),i(t("textarea",{"onUpdate:modelValue":a=>o.question=a,placeholder:"Question",class:"border p-2 rounded w-full mb-1",required:""},null,8,W),[[f,o.question]]),i(t("select",{"onUpdate:modelValue":a=>o.difficulty=a,id:"difficulty",class:"border p-2 rounded w-full mb-1"},e[9]||(e[9]=[t("option",{value:"",disabled:""},"Select",-1),t("option",{value:"Novice"},"Novice",-1),t("option",{value:"Expert"},"Expert",-1)]),8,X),[[_,o.difficulty]]),i(t("input",{"onUpdate:modelValue":a=>o.correct_answer=a,placeholder:"Correct Answer",class:"border p-2 rounded w-full mb-1",required:""},null,8,ee),[[f,o.correct_answer]]),r(l).activity.length>1?(u(),d("button",{key:0,type:"button",onClick:a=>M(b),class:"bg-red-500 text-white px-3 py-1 rounded"}," Remove ",8,te)):w("",!0)]))),128)),t("button",{type:"button",onClick:q,class:"bg-gray-500 text-white px-4 py-2 rounded mb-2"}," + Add Activity Section "),t("div",{class:"flex items-center gap-2 mt-4"},[e[10]||(e[10]=t("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded ml-2"}," Update Lesson ",-1)),t("button",{onClick:E,class:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300"}," ‚Üê Back ")])],32)])])])]),_:1})],64))}};export{de as default};
